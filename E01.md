# E01

بازیابی اطلاعات یک هدفی رو دنبال میکند و آن این است که نیاز اطلاعاتی ما از درون یک مجموعه داده هایی که ذاتا ساختار ناپذیر هستند استخراج بشه . هدف پیدا کردن نیاز اطلاعاتی ما هست .

آن مجموعه از داده ها میتوانند از نوع تصویر ، ویدیو ، صوت ، متن و حتی ترکیبی از اینها باشد . ولی در این درس ما با نوع متن سر و کار داریم . و میخواهیم بازیابی اطلاعات رو از روی اسناد متنی انجام دهیم .

## چرا از داده های بدون ساختار اطلاعات بازیابی کنیم ؟

دلیلش این هست که در مقایسه با سال های قبل ، هم حجم داده ها افزایش پیدا میکند ، هم اینکه نسبت داده های ساختار نیافته در مقایسه با داده های ساختار یافته افزایش یافته .

منظور ما از داده های ساختار یافته آن است که بتوان با اعمال فیلتر برروی آنها نیاز اطلاعاتی را برقرار کرد ، یا به عبارتی به گونه ایی دیجیتالی نظم داده شده باشند .

## داده های ساختار نیافته در ۱۶۸۰

معمولا در غالب همان کتاب ها و نمایش نامه ها و به همین صورت بودند . برای مثال در زبان پارسی شاهنامه را میتوان برای نمونه بیان کرد .

> [!IMPORTANT]
> درست است که ما فکر میکنیم این داده ها در غالب یک نظمی بیان شده اند ولی منظور ما اینجا از ساختار یافته و ساختار نیافته به آن صورت نیست .
> منظور ما از داده های ساختار یافته آن است که برای نمونه شما بتوانید با یک فیلتر به داده ی دلخواه خود یا زیر مجموعه ایی از آن برسید . یا به عبارتی داده های دیجیتال منظم داشته باشید .
> اما داده های ساختار نیافته به این گونه نیستند .


برای نمونه متنی که دنبال آن بودند را با عبارت های بولی (درست/نادرست) بیان میکردند . برای نمونه میگفتند دنبال نمایش نامه ایی باش که واژه ی سزار درون آن باشد اما واژه ی کالپرنیا داخل آن نباشد . و برای این منظور از عبارات منظم (Regular Expressions) استفاده میکردند .

## ماتریس term-document

این ماتریس به گونه ایی بود که برچسب سطر های آن نام یک واژه ایی بود و برچسب ستون های آن نام اسناد بودند . و در محل برخورد هر واژه با هر سند ، اگر واژه در سند موجود باشد عدد 1 و اگر نباشد عدد 0 گذاشته میشود .


|           | Antony and Cleopatra | Julius Caesar | The Tempest | Hamlet | Othello | Macbeth |
| --------- | -------------------- | ------------- | ----------- | ------ | ------- | ------- |
| Antony    | 1                    | 1             | 0           | 0      | 0       | 1       |
| Brutus    | 1                    | 1             | 0           | 1      | 0       | 0       |
| Caesar    | 1                    | 1             | 0           | 1      | 1       | 1       |
| Calpurnia | 0                    | 1             | 0           | 0      | 0       | 0       |
| Cleopatra | 1                    | 0             | 0           | 0      | 0       | 0       |
| Mercy     | 1                    | 0             | 1           | 1      | 1       | 1       |
| Worser    | 1                    | 0             | 1           | 1      | 1       | 0       |

## بردار رخداد

به راحتی میتوانید برای پیدا کردن نمایش نامه ها یا سند هایی که دارای یک سری واژه های خاصی هستند ، سطر های دارای آن واژه هارا با هم دیگر AND کنید . اینگونه سند هایی که دارای آن واژه های هستند پیدا خواهند شد .

## فرض پایه ی بازیابی اطلاعات

فرض میکند که مجموعه ی مستنداتی که داریم ثابت است . یعنی نه کم میشود نه زیاد میشود .

> [!NOTE] چرا ؟
> چون در آن زمان مجموعه ی مستنداتی که آنها داشتند ثابت بود ، و ماتریس term-document ثابت بود و از طرفی اگر چیزی تغییر میکرد باید تمام ماتریس term-document را دوباره از اول مینوشتند .

## داده های بازیابی شده چگونه ارزیابی میشوند ؟

در این درس یک فصل جدا فقط برای این موضوع داریم و به این موضوع به طور مختصر و کامل پرداخته خواهد شد .

اما دو معیار معروف و شناخته شده را در زیر بیان میکنیم :

- دقت یا precision : قطعه های بازیابی شده ی مستندات که مرتبط با نیاز های کاربر هستند .
- ریکال یا Recall : قطعه های مستندات مرتبط در مجموعه که بازیابی شده اند .

## ایراد ماتریس term-document

فرض کنید که ۱ میلیون مستند دارید و هر کدام به طور متوسط ۱۰۰۰ واژه دارند . اگر برای هر واژه ۶ بایت در نظر بگیریم ، حدود ۶ گیگابایت ما برای این مجموعمون داده نیاز داریم . و حالا فرض کنید ۵۰۰ هزار واژه به عنوان برچسب سطر های ماتریس term-document داریم . ماتریس ما ابعاد 500 هزار در 1 میلیون خواهد داشت که بیشتر درایه هایش صفر خواهند بود .

## راه بهتر ؟

مهندسان داده گفتند که بیاییم و از inverted-index استفاده بکنیم . یعنی بیاییم سراغ یک شاخص دیگری و اون اتلاف حافظه رو به گونه ایی درست کنیم .

## ایندکس وارون یا inverted-index

در این روش برای هر کلمه یک بردار حاوی شماره سند هایی که در آن وجود دارد ساخته میشود . و شماره سند ها به ترتیب مرتب میشوند .

این بردار ممکن است طولانی شود .

## نحوه ی ساخته شدن inverted-index

فرض کنید یک سری فایل های متنی و مستنداتی داریم که تشکیل شده از واژه های گوناگونی هستند . ما باید بتونیم یک index ای بسازیم که از این index برای شتاب دادن به بازیابی اطلاعات استفاده کنیم .

### چجوری ساخته میشه ؟

فرض کنید برای نمونه ما ۲ مستند داریم ، هرکدام دارای یک سری واژه هستند . یک جدول میسازیم که ستون چپ واژه ها هستند و ستون راست شناسه ی سند .

گام بعدی این هست که جدول را بر اساس الفبای واژگان مرتب کنیم . دقت کنید که واژگان در ستون چپ میتوانند تکراری باشند ، برای مثال واژه ی wish میتواند ۲ بار یا بیشتر تکرار شده باشد .

حال واژگان جدول را ادغام میکنیم . یک ستون جدید به جدول اضافه میکنیم به نام فرکانس ، فرکانس تعداد تکرار واژه ها بعد از ادغام است . ستون سمت راست که شماره ی سند باشد ، به صورت یک لیست پیوندی در می آید .

## کوئری هارو چجوری بیان میکنیم ؟

ما داریم راجع به کوئری هایی از نوع بولین صحبت میکنیم یعنی با استفاده از عملگر های منطقی میخوایم کوئریمون رو شکل بدیم .
به عنوان مثال : بروتوس و سزار
یعنی بیا برای من مستنداتی رو بازیابی کن که دارای کلمه ی بروتوس و سزار باشند .

فرض کنیم واژه های بروتوس و سزار جفتشون یک بردار از شماره ی سند هایی دارند که در آن هستند ، باید این دو بردار را با هم ادغام کنیم و اشتراک آنها را بگیریم .

## بولین کوئری ها

هدف توی بولین کوئری ها تطبیق دقیق است . حساس به کلمه هستند ، حتی اندیک تفاوت بین متن هدف و کوئری شما باعث میشود نتیجه خالی برگردانده شود .

فقط وجود یا عدم وجود مهم است نه موقعیت آن .

## بهینه سازی کوئری

ترتیب AND کردن در بردار inverted-index خیلی مهمه . اگر در مراحل اول لیست خیلی کوتاه بشه انگار که یک سری مرحله رو کوتاه کردی و کار درست در نمیاد .

## بهینه سازی عمومی

بجای AND ما OR میگیریم .












