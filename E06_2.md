# E06_2

# موتور های جست و جوی رنک شده Ranked retrieval

در این فصل راجع به موتور های جست و جویی که نتایج رو به صورت امتیاز دهی شده (رنک شده یا Ranked) به کاربر نشون میدن صبحت کنیم .
تا به الان موتور های جست و جویی که راجع به آنها صحبت کردیم موتور های جست و جویی بودند که کوئری هارو به صورت boolean دریافت میکردند . یعنی متن های جست و جوی ما اصولا از نوع boolean بودند مانند AND یا OR یا NOT و از این موارد رو استفاده میکردیم و برای نمونه میگفتیم : اگر من این عبارت رو وارد کردم درواقع AND اینها منظورم بوده . یعنی نتایج شامل کلماتی باشد و شامل کلماتی نباشد .

که این نوع بازیابی محدودیت های خاص خودش رو داره . موتور های جست و جوی این چنینی شبیه Advanced Search هستند و کاربر های معمولی با آنها راحت نیستند . پس می آیند سراغ نوع دیگری از موتور های جست و جو که نتایج رو به صورت Rank شده نمایش میدهند و کاربر تنها کاری که انجام میده اینه که میاد یک متنی رو جست و جو میکنه و از اتفاق های پشت پرده هیچ خبری نداره . نه میدونه AND چیه نه میدونه OR چیه و غیره . و کاربر دنبال اینه که مرتبط ترین نتایج رو نسبت به متن جست و جوش پیدا کنه .

> [!IMPORTANT] نکته
> یکی از ایراد هایی که به موتور های جست و جوی boolean وارد هست اینه که کاربرانی که میخوان از اونها استفاده کنند باید کاربران خبره باشند .
> این موتور های جست و جو تعادل ندارند . یا خیلی نتیجه نشون میدن یا اصلا هیچی نمیارن و ترتیب در اینها معنی نداره . و اینکه اگر یکی دو واژه به متن جست و جوی خودتون اضافه کنید میبیند نتایج میشن صفر .

بنابراین میریم سراغ موتور های جست و جویی که نتایج رو بر اساس یک امتیاز به ما نمایش میدن و درواقع نتایج رو مرتب میکنند .
این مرتب کردن باید بر اساس یک امتیاز وارد بشه ، یعنی ما یک چیزی رو جست و جو میکنیم ، و سندی که از نظر موتور جست و جو بیشترین ارتباط رو داره میشه نخستین نتیجه ایی که به کاربر نشون داده میشه ، دومین مرتبط ترین میشه نتیجه دوم .
حالا اینکه این امتیاز چگونه محاسبه میشه موضوع بحث ماست ، باید ببینیم که چه فرمول هایی براش وجود داره و اصلا چگونه به اون فرمول ها رسیدند .
کاربر رو درگیر نمیکنیم ، کاربر هرچیزی که در ذهنش وجود داره رو بدون اینکه اصلا از عملگر خاصی دانشی داشته باشه متن خودش رو جست و جو میکنه .
بنا براین این موتور های جست و جو میتونند بسیار همه گیر باشند ، چون طراحی شدند تا همه از اونها استفاده کنند .

# امتیاز دادن به عنوان پایه ی بازیابی رتبه بندی شده

به دنبال چی باید باشیم ؟ فرض کنید واژه ی iphone رو جست و جو کردیم ، چه سند هایی باید به ما نمایش داده شود ؟ در ساده ترین حالت ممکن واژه ی iphone در اون سند بیشترین تکرار رو داشته باشه .

## معیار های امتیازدهی به نتایج

### تعداد تکرار واژه

بنا براین یکی از مواردی که میتونه روی امتیاز هر سندی اثر بزاره تعداد تکرار واژه های موجود در کوئری در اون سند هست .

#### ضریب Jaccard

جکارد بین دو مجموعه تعریف میشه ، و یک جورایی اشتراک این دو مجموعه رو اندازه گیری میکنه .
فرمولش هم اینه :

$$jaccard(A,B) = |\ A \ \cap \ B \ | \ \div \ |\ A \ \cup \ B \ |$$
$$jaccard(A,A) = 1$$
$$jaccard(A,B) = 0 \ If \ A \ \cap \ B = 0$$

فرض کنید مجموعه ی A واژه های در اینجا متن جست و جوی ما باشد و B واژه های سند ما باشد . وقتی میگوییم اشتراک مجموعه ی A با مجموعه ی B یعنی واژه هایی که در کوئری و در سند وجود دارند .

این روش خوبی نیست ، زیرا تکرار را در نظر نمیگیرد که این به ذات مجموعه برمیگردد .

معمولا همیشه این ضریب به سمت 0 میل میکند . و جکارد اصلا معیار مناسبی نیست .

> [!IMPORTANT] ایراد های ضریب Jaccard
> این هست که تعداد تکرار رو در نظر نمیگیره
> و در این ضریب ارزش همه ی واژه های جست و جو شده یکی است


## مفهوم Bag of words model

زمانی که ما یک متنی داریم میتونیم یک کیسه ایی از واژه ها ایجاد کنیم که این کیسه یا کیف میگه هر کلمه چند بار تکرار شده . و این موقعیت واژه هارو نسبت به همدیگه در نظر نمیگیره .
شبیه اینه که بگیم از این واژه چند تا وجود داره .

## مفهوم Term frequency

یعنی واژه ی مورد نظر ما چند دفه توی یک سندی تکرار شده . عبارت $tf_{t,d}$ یعنی Term frequency برای واژه ی t در سند d .

حال پرسشی پیش می آید . همینکه ما تکرار هارا به صورت خام در نظر بگیریم درست است ؟ خیر .

## مفهوم Log-frequency weighting

محاسبه ی log frequency weight عبارت t در سند d اینگونه محاسبه میشود :

##### $$W\ _{t,d} \ = \ \begin{matrix} 1 + \log_{10}(\ tf\ _{t,d} \ ), \ \ \ If \ \ tf_{t,d} \ \gt \ 0 \\ 0, \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ otherwise  \end{matrix}$$

نحوه ی محاسبه ی امتیاز :

##### $$score \ = \ \sum_{t\ \in \ q \ \cap \ d} \left ( 1 + \log \ tf_{t,d} \right )$$

## مفهوم Document Frequency

این مفهوم یعنی یک واژه در چند تا سند تکرار شده ، و ارزش واژه رو تقریبا میشه گفت داریم تخمین میزنیم.
واژه های نادر نسبت به واژه های معمولی دارای داده های بیشتری هستند و سند های دارای این واژه ها باید امتیاز بیشتری بگیرند.

## مفهوم idf weight

عبارت $df_t$ document frequency واژه ی t است : تعداد سند هایی که دارای واژه ی t هستند. و N یعنی تعداد کل سند هایی که در پایگاه داده ی ما وجود داره.

- این $df_t$ یک مقیاس معکوس برای ارزیابی میزان دارای داده بودن (informativeness) واژه ی t است
- و $df_t \le N$

فرمول :

$$idf_t \ = \ \log_{10}(N \ \div \ df_t)$$




## تاثیر شاخص idf برروی رتبه بندی

این شاخص هیچ اثری روی متن های جست و جوی تک واژه ایی نداره.


